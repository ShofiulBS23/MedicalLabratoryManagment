<style>
    .content {
        display: flex;
        justify-content: space-between;
    }

    .form-left, .table-right {
        width: 48%;
    }

    .form-group {
        margin-bottom: 10px;
    }

    label {
        display: inline-block;
        width: 40%;
    }

    input[type="text"], input[type="date"] {
        width: 58%;
        padding: 8px;
    }

    .table-container {
        margin-bottom: 10px;
    }

    .table-buttons {
        text-align: center;
    }

    button {
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        padding: 10px 20px;
        margin: 5px;
    }

        button:hover {
            background-color: #45a049;
        }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
    }

    th, td {
        border: 1px solid black;
        padding: 8px;
        text-align: left;
    }

    .buttons {
        text-align: center;
        margin-top: 20px;
    }

    /* Reduce vertical spacing */

    div.dataTables_wrapper div.dataTables_info {
        padding-top: 0px;
    }

    .table > tbody > tr > td, .table > tbody > tr > th, .table > tfoot > tr > td, .table > tfoot > tr > th, .table > thead > tr > td, .table > thead > tr > th {
        padding: 4px 8px 4px 8px;
    }
    /* End Reduce vertical spacing */

    :is(#patientDetailsTable_filter,#testsAvailableTable_filter) > label > input[type=search] {
        position: relative;
        right: 97px;
    }
</style>

<section class="container">
    <h2 class="mb-4">Bills Details</h2>
    <div class="row">
        <div class="col-md-6">
            <form>
                <div class="mb-3">
                    <label for="txtBill_No" class="form-label">Bill No:</label>
                    <input type="text" class="form-control" id="txtBill_No" name="txtBill_No">
                </div>
                <div class="mb-3">
                    <label for="txtPatient_ID" class="form-label">Patient ID:</label>
                    <input type="text" class="form-control" id="txtPatient_ID" name="txtPatient_ID">
                </div>
                <div class="mb-3">
                    <label for="txtPatient_Name" class="form-label">Patient Name:</label>
                    <input type="text" class="form-control" id="txtPatient_Name" name="txtPatient_Name">
                </div>
                <div class="mb-3">
                    <label for="txtTprice" class="form-label">Total Price:</label>
                    <input type="text" class="form-control" id="txtTprice" name="txtTprice">
                </div>
                <div class="mb-3">
                    <label for="txtDate" class="form-label">Date:</label>
                    <input type="date" class="form-control" id="txtDate" value="2024-06-21">
                </div>
            </form>
        </div>
        <div class="col-md-6">
            <table id="DGVBills" class="table table-striped">
                <thead>
                    <tr>
                        <th>Test ID</th>
                        <th>Test Name</th>
                        <th>Price</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dynamic table rows will go here -->
                </tbody>
            </table>
            <div class="d-flex justify-content-between mb-4">
                <button id="btnAddTest">Add Test</button>
                <button id="btnAddPatient" class="btn btn-primary">Add Patient</button>
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-center mt-4">
        <button id="btnSave" class="btn btn-success me-2">Save</button>
        <button id="btnSearch" class="btn btn-secondary me-2">Search</button>
        <button id="btnAdd" class="btn btn-info me-2">Add</button>
        <button id="btnDelete" class="btn btn-danger me-2">Delete</button>
        <button id="btnCancel" class="btn btn-warning">Cancel</button>
    </div>
</section>

<partial name="_TestSelectModal"/> 
<partial name="_PatientDetailsModal"/> 


<script>

    var hideModal = () => { $('#testSelectionModal').modal('hide') }
    var hidePatientModal = () => { $('#patientDetailsModal').modal('hide'); }
    var billingTable;

    $(document).ready(function () {
        // Add delete functionality to DGVBills

        billingTable = $('#DGVBills').DataTable({
            "paging": true,
            "searching": false
        });

        $('#DGVBills tbody').on('click', 'button.delete-btn', function () {
            billingTable.row($(this).parents('tr')).remove().draw();
        });

        $('#btnAddTest').click(() => {
            $('#testSelectionModal').modal('show');
        });

        $('#btnSearch').click(function () {
            $('#patientDetailsModal').modal('show');
        });
    });
</script>
